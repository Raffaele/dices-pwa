const Ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}};Ee();function k(){}function $e(t,e){for(const n in e)t[n]=e[n];return t}function _e(t){return t()}function Z(){return Object.create(null)}function S(t){t.forEach(_e)}function ke(t){return typeof t=="function"}function N(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let j;function x(t,e){return j||(j=document.createElement("a")),j.href=e,t===j.href}function we(t){return Object.keys(t).length===0}function qe(t,e,n,l){if(t){const i=me(t,e,n,l);return t[0](i)}}function me(t,e,n,l){return t[1]&&l?$e(n.ctx.slice(),t[1](l(e))):n.ctx}function Me(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=e.dirty[a]|i[a];return r}return e.dirty|i}return e.dirty}function Ae(t,e,n,l,i,r){if(i){const o=me(e,n,l,r);t.p(o,i)}}function Ie(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function p(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function A(){return H(" ")}function V(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ce(t){return Array.from(t.childNodes)}function ee(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function te(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e){l.selected=!0;return}}t.selectedIndex=-1}function De(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ne(t,e,n){t.classList[n?"add":"remove"](e)}function Se(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,l,e),i}let P;function O(t){P=t}function he(){if(!P)throw new Error("Function called outside component initialization");return P}function Ne(t){he().$$.on_destroy.push(t)}function U(){const t=he();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=Se(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function Re(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const B=[],X=[],z=[],le=[],Fe=Promise.resolve();let G=!1;function Ve(){G||(G=!0,Fe.then(pe))}function J(t){z.push(t)}const Y=new Set;let K=0;function pe(){const t=P;do{for(;K<B.length;){const e=B[K];K++,O(e),Le(e.$$)}for(O(null),B.length=0,K=0;X.length;)X.pop()();for(let e=0;e<z.length;e+=1){const n=z[e];Y.has(n)||(Y.add(n),n())}z.length=0}while(B.length);for(;le.length;)le.pop()();G=!1,Y.clear(),O(t)}function Le(t){if(t.fragment!==null){t.update(),S(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}const W=new Set;let I;function ie(){I={r:0,c:[],p:I}}function re(){I.r||S(I.c),I=I.p}function E(t,e){t&&t.i&&(W.delete(t),t.i(e))}function q(t,e,n,l){if(t&&t.o){if(W.has(t))return;W.add(t),I.c.push(()=>{W.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function L(t){t&&t.c()}function C(t,e,n,l){const{fragment:i,on_mount:r,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),l||J(()=>{const u=r.map(_e).filter(ke);o?o.push(...u):S(u),t.$$.on_mount=[]}),a.forEach(J)}function D(t,e){const n=t.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Be(t,e){t.$$.dirty[0]===-1&&(B.push(t),Ve(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,l,i,r,o,a=[-1]){const u=P;O(t);const s=t.$$={fragment:null,ctx:null,props:r,update:k,not_equal:i,bound:Z(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Z(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};o&&o(s.root);let m=!1;if(s.ctx=n?n(t,e.props||{},(c,y,...h)=>{const g=h.length?h[0]:y;return s.ctx&&i(s.ctx[c],s.ctx[c]=g)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](g),m&&Be(t,c)),y}):[],s.update(),m=!0,S(s.before_update),s.fragment=l?l(s.ctx):!1,e.target){if(e.hydrate){const c=Ce(e.target);s.fragment&&s.fragment.l(c),c.forEach($)}else s.fragment&&s.fragment.c();e.intro&&E(t.$$.fragment),C(t,e.target,e.anchor,e.customElement),pe()}O(u)}class F{$destroy(){D(this,1),this.$destroy=k}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!we(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Oe(t){let e;const n=t[1].default,l=qe(n,t,t[0],null);return{c(){l&&l.c()},m(i,r){l&&l.m(i,r),e=!0},p(i,[r]){l&&l.p&&(!e||r&1)&&Ae(l,n,i,i[0],e?Me(n,i[0],r,null):Ie(i[0]),null)},i(i){e||(E(l,i),e=!0)},o(i){q(l,i),e=!1},d(i){l&&l.d(i)}}}function Pe(t,e,n){let{$$slots:l={},$$scope:i}=e;return t.$$set=r=>{"$$scope"in r&&n(0,i=r.$$scope)},[i,l]}class je extends F{constructor(e){super(),R(this,e,Pe,Oe,N,{})}}function Ke(t){let e;return{c(){e=b("h1"),e.textContent="DICES PWA",v(e,"class","svelte-hwear2")},m(n,l){w(n,e,l)},p:k,i:k,o:k,d(n){n&&$(e)}}}class ze extends F{constructor(e){super(),R(this,e,null,Ke,N,{})}}const se={getFields:He,saveFields:Je},We="dices-pwa",ve="stored-fields";function He(){return Te(ve)||[{dices:[6]}]}function Je(t){Ye(ve,t)}function Te(t){const e=localStorage.getItem(be(t));if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Ye(t,e){const n=JSON.stringify(e);localStorage.setItem(be(t),n)}function be(t){return`${We}:${t}`}var Xe="/dices-pwa/assets/edit-btn.34a84f98.svg",Ge="/dices-pwa/assets/launch-btn.12fb09f0.svg";function Q(t,e=-1){const n=t.filter(r=>r!==e),l=Math.trunc(Math.random()*n.length);return n[l]}function oe(t,e,n){const l=t.slice();return l[5]=e[n],l}function ce(t){let e,n=t[5]+"",l;return{c(){e=b("option"),l=H(n),e.__value=t[5],e.value=e.__value},m(i,r){w(i,e,r),p(e,l)},p:k,d(i){i&&$(e)}}}function Qe(t){let e,n,l,i,r,o,a,u,s,m,c,y=t[1],h=[];for(let g=0;g<y.length;g+=1)h[g]=ce(oe(t,y,g));return{c(){e=b("fieldset"),n=b("legend"),n.textContent="New dice",l=A(),i=b("div"),r=b("div"),r.textContent="MAX",o=A(),a=b("select");for(let g=0;g<h.length;g+=1)h[g].c();u=A(),s=b("div"),s.textContent="+",v(n,"class","svelte-1hsxz0d"),t[0]===void 0&&J(()=>t[3].call(a)),v(s,"role","button"),v(s,"class","cmd-btn add-btn"),v(e,"class","svelte-1hsxz0d")},m(g,f){w(g,e,f),p(e,n),p(e,l),p(e,i),p(i,r),p(i,o),p(i,a);for(let _=0;_<h.length;_+=1)h[_].m(a,null);te(a,t[0]),p(e,u),p(e,s),m||(c=[V(a,"change",t[3]),V(s,"click",t[2])],m=!0)},p(g,[f]){if(f&2){y=g[1];let _;for(_=0;_<y.length;_+=1){const d=oe(g,y,_);h[_]?h[_].p(d,f):(h[_]=ce(d),h[_].c(),h[_].m(a,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=y.length}f&3&&te(a,g[0])},i:k,o:k,d(g){g&&$(e),ge(h,g),m=!1,S(c)}}}function Ue(t,e,n){const l=U(),i=Array.from({length:69}).map((u,s)=>s+2);let r=6;function o(){l("createVaule",r)}function a(){r=De(this),n(0,r),n(1,i)}return[r,i,o,a]}class Ze extends F{constructor(e){super(),R(this,e,Ue,Qe,N,{})}}function ue(t){let e,n,l;return{c(){e=b("div"),e.textContent="+",v(e,"class","cmd-btn delete-btn svelte-1l9t4i4")},m(i,r){w(i,e,r),n||(l=V(e,"click",t[5]),n=!0)},p:k,d(i){i&&$(e),n=!1,l()}}}function xe(t){let e,n,l,i,r,o,a,u=t[1]&&t[2]&&ue(t);return{c(){e=b("div"),u&&u.c(),n=A(),l=b("strong"),i=H(t[0]),r=A(),o=b("div"),a=H(t[4]),v(l,"class","dice-max svelte-1l9t4i4"),v(o,"class","dice-value svelte-1l9t4i4"),ne(o,"running",t[3]),v(e,"class","single-dice svelte-1l9t4i4")},m(s,m){w(s,e,m),u&&u.m(e,null),p(e,n),p(e,l),p(l,i),p(e,r),p(e,o),p(o,a)},p(s,[m]){s[1]&&s[2]?u?u.p(s,m):(u=ue(s),u.c(),u.m(e,n)):u&&(u.d(1),u=null),m&1&&ee(i,s[0]),m&16&&ee(a,s[4]),m&8&&ne(o,"running",s[3])},i:k,o:k,d(s){s&&$(e),u&&u.d()}}}function et(t,e,n){let l,{max:i}=e,{attempt:r}=e,{isEditMode:o}=e,{isDeleteBtnAvailable:a}=e,u,s=null,m=!1;const c=U();function y(){s&&clearInterval(s),n(3,m=!0);const f=h(r,l,u);let _=0;s=setInterval(()=>{n(4,u=f[_++]),_===f.length&&(clearInterval(s),s=null,n(3,m=!1))},80)}Ne(()=>{s!==null&&clearInterval(s)});function h(f,_,d=-1){let M=d;return Array.from({length:f}).reduce(T=>(M=Q(_,M),[...T,M]),[])}function g(){c("delete")}return t.$$set=f=>{"max"in f&&n(0,i=f.max),"attempt"in f&&n(6,r=f.attempt),"isEditMode"in f&&n(1,o=f.isEditMode),"isDeleteBtnAvailable"in f&&n(2,a=f.isDeleteBtnAvailable)},t.$$.update=()=>{t.$$.dirty&1&&n(8,l=Array.from({length:i}).map((f,_)=>_+1)),t.$$.dirty&256&&n(4,u=Q(l)),t.$$.dirty&8&&c("isRuningChange",m)},[i,o,a,m,u,g,r,y,l]}class tt extends F{constructor(e){super(),R(this,e,et,xe,N,{max:0,attempt:6,isEditMode:1,isDeleteBtnAvailable:2,run:7})}get run(){return this.$$.ctx[7]}}function fe(t,e,n){const l=t.slice();return l[14]=e[n],l[15]=e,l[16]=n,l}function ae(t){let e,n=t[16],l;const i=()=>t[10](e,n),r=()=>t[10](null,n);function o(...s){return t[11](t[14],t[15],t[16],...s)}function a(){return t[12](t[16])}let u={attempt:t[5],max:t[14].maxValue,isEditMode:t[1],isDeleteBtnAvailable:t[0].length>1};return e=new tt({props:u}),i(),e.$on("isRuningChange",o),e.$on("delete",a),{c(){L(e.$$.fragment)},m(s,m){C(e,s,m),l=!0},p(s,m){t=s,n!==t[16]&&(r(),n=t[16],i());const c={};m&32&&(c.attempt=t[5]),m&8&&(c.max=t[14].maxValue),m&2&&(c.isEditMode=t[1]),m&1&&(c.isDeleteBtnAvailable=t[0].length>1),e.$set(c)},i(s){l||(E(e.$$.fragment,s),l=!0)},o(s){q(e.$$.fragment,s),l=!1},d(s){r(),D(e,s)}}}function de(t){let e,n;return e=new Ze({}),e.$on("createVaule",t[13]),{c(){L(e.$$.fragment)},m(l,i){C(e,l,i),n=!0},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){q(e.$$.fragment,l),n=!1},d(l){D(e,l)}}}function nt(t){let e,n,l,i,r,o,a,u,s;return{c(){e=b("button"),n=b("img"),i=A(),r=b("button"),o=b("img"),x(n.src,l=Xe)||v(n,"src",l),v(n,"alt","edit"),v(n,"class","svelte-1iq6qt7"),v(e,"class","cmd-btn svelte-1iq6qt7"),x(o.src,a=Ge)||v(o,"src",a),v(o,"alt","Run"),v(o,"class","svelte-1iq6qt7"),r.disabled=t[2],v(r,"class","cmd-btn svelte-1iq6qt7")},m(m,c){w(m,e,c),p(e,n),w(m,i,c),w(m,r,c),p(r,o),u||(s=[V(e,"click",t[8]),V(r,"click",t[7])],u=!0)},p(m,c){c&4&&(r.disabled=m[2])},d(m){m&&$(e),m&&$(i),m&&$(r),u=!1,S(s)}}}function lt(t){let e,n,l;return{c(){e=b("button"),e.textContent="SAVE",v(e,"class","cmd-btn cmd-save svelte-1iq6qt7")},m(i,r){w(i,e,r),n||(l=V(e,"click",t[9]),n=!0)},p:k,d(i){i&&$(e),n=!1,l()}}}function it(t){let e,n,l,i,r,o,a,u=t[3],s=[];for(let f=0;f<u.length;f+=1)s[f]=ae(fe(t,u,f));const m=f=>q(s[f],1,1,()=>{s[f]=null});let c=t[1]&&de(t);function y(f,_){return f[1]?lt:nt}let h=y(t),g=h(t);return{c(){e=b("div"),n=b("div"),l=b("div");for(let f=0;f<s.length;f+=1)s[f].c();i=A(),c&&c.c(),r=A(),o=b("section"),g.c(),v(l,"class","field-dices svelte-1iq6qt7"),v(o,"class","cmd-section svelte-1iq6qt7"),v(e,"class","field svelte-1iq6qt7")},m(f,_){w(f,e,_),p(e,n),p(n,l);for(let d=0;d<s.length;d+=1)s[d].m(l,null);p(n,i),c&&c.m(n,null),p(e,r),p(e,o),g.m(o,null),a=!0},p(f,[_]){if(_&123){u=f[3];let d;for(d=0;d<u.length;d+=1){const M=fe(f,u,d);s[d]?(s[d].p(M,_),E(s[d],1)):(s[d]=ae(M),s[d].c(),E(s[d],1),s[d].m(l,null))}for(ie(),d=u.length;d<s.length;d+=1)m(d);re()}f[1]?c?_&2&&E(c,1):(c=de(f),c.c(),E(c,1),c.m(n,null)):c&&(ie(),q(c,1,1,()=>{c=null}),re()),h===(h=y(f))&&g?g.p(f,_):(g.d(1),g=h(f),g&&(g.c(),g.m(o,null)))},i(f){if(!a){for(let _=0;_<u.length;_+=1)E(s[_]);E(c),a=!0}},o(f){s=s.filter(Boolean);for(let _=0;_<s.length;_+=1)q(s[_]);q(c),a=!1},d(f){f&&$(e),ge(s,f),c&&c.d(),g.d()}}}function rt(t,e,n){let l,i,{dices:r}=e,{isEditMode:o}=e,a=[];const u=U();let s=20;function m(){a.forEach(d=>d==null?void 0:d.run())}function c(){u("edit")}function y(){u("save")}function h(d,M){X[d?"unshift":"push"](()=>{a[M]=d,n(4,a)})}const g=(d,M,T,{detail:ye})=>n(3,M[T].isRunning=ye,l),f=d=>u("deleteDice",d);function _(d){Re.call(this,t,d)}return t.$$set=d=>{"dices"in d&&n(0,r=d.dices),"isEditMode"in d&&n(1,o=d.isEditMode)},t.$$.update=()=>{t.$$.dirty&1&&n(3,l=r.map(d=>({maxValue:d,isRunning:!1}))),t.$$.dirty&8&&n(2,i=l.some(({isRunning:d})=>d)),t.$$.dirty&4&&(i||n(5,s=Q([18,19,20,21,22,23])))},[r,o,i,l,a,s,u,m,c,y,h,g,f,_]}class st extends F{constructor(e){super(),R(this,e,rt,it,N,{dices:0,isEditMode:1})}}function ot(t){let e,n,l;return n=new st({props:{dices:t[0][0].dices,isEditMode:t[1]}}),n.$on("edit",t[2]),n.$on("save",t[3]),n.$on("deleteDice",t[6]),n.$on("createVaule",t[7]),{c(){e=b("main"),L(n.$$.fragment),v(e,"class","svelte-1y6mx4k")},m(i,r){w(i,e,r),C(n,e,null),l=!0},p(i,[r]){const o={};r&1&&(o.dices=i[0][0].dices),r&2&&(o.isEditMode=i[1]),n.$set(o)},i(i){l||(E(n.$$.fragment,i),l=!0)},o(i){q(n.$$.fragment,i),l=!1},d(i){i&&$(e),D(n)}}}function ct(t,e,n){let l=se.getFields(),i=!1;function r(){n(1,i=!0)}function o(){n(1,i=!1),se.saveFields(l)}function a(c){n(0,l=[{dices:l[0].dices.filter((y,h)=>h!==c)}])}function u(c){console.log("prova",c),n(0,l=[{dices:[...l[0].dices,c]}])}return[l,i,r,o,a,u,({detail:c})=>a(c),c=>u(c.detail)]}class ut extends F{constructor(e){super(),R(this,e,ct,ot,N,{})}}function ft(t){let e,n,l,i;return e=new ze({}),l=new ut({}),{c(){L(e.$$.fragment),n=A(),L(l.$$.fragment)},m(r,o){C(e,r,o),w(r,n,o),C(l,r,o),i=!0},i(r){i||(E(e.$$.fragment,r),E(l.$$.fragment,r),i=!0)},o(r){q(e.$$.fragment,r),q(l.$$.fragment,r),i=!1},d(r){D(e,r),r&&$(n),D(l,r)}}}function at(t){let e,n;return e=new je({props:{$$slots:{default:[ft]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(l,i){C(e,l,i),n=!0},p(l,[i]){const r={};i&1&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){q(e.$$.fragment,l),n=!1},d(l){D(e,l)}}}class dt extends F{constructor(e){super(),R(this,e,null,at,N,{})}}new dt({target:document.getElementById("app")});
